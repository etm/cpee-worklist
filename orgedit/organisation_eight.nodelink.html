<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>NodeLink</title>
    <style media="screen" type="text/css">
      .highlight path {
        stroke: #a40000;
      }
      .highlight polygon {
        stroke: #a40000;
      }
      .entity {
        cursor: pointer;
      }
    </style>
    <script type="text/javascript" src="helpers/jquery-min.js"></script>
    <script type="text/javascript" src="helpers/jquery.svgdom.js"></script>
    <script type="text/javascript" src="helpers/underscore-min.js"></script>
    <script type="text/javascript" src="helpers/jquery-ui.custom.min.js"></script>
    <script type="text/javascript" src="helpers/ui.js"></script>
    <link rel="stylesheet" href="helpers/ui.css" type="text/css"/>
    <link rel="stylesheet" href="helpers/custom.css" type="text/css"/>
    <script type="text/javascript">
      function over_entity(target) {
      var tname = $(target).attr('id').replace(/entity_[^_]*_/,'');
      var tnamer = new RegExp(tname);
      $('.edge').each(function(e,f){
      if ($(f).attr('id').match(tnamer)) {
      var pname = $(f).attr('id').replace(/edge_[^_]*_/,'');
      pname = pname.replace(/_(a|b)$/,'');
      pname = pname.split('--');
      $('.unit, .role, .subject').each(function(g,h){
      if (
      $(h).attr('id') == 'entity_unit_' + pname[0] || 
      $(h).attr('id') == 'entity_role_' + pname[0] || 
      $(h).attr('id') == 'entity_subject_' + pname[0] ||
      $(h).attr('id') == 'entity_unit_' + pname[1] || 
      $(h).attr('id') == 'entity_role_' + pname[1] || 
      $(h).attr('id') == 'entity_subject_' + pname[1]
      ) {
      $(h).addClass('highlight');
      }  
      });
      $(f).addClass('highlight');
      }
      });  
      }
      function out_entity(target) {
      $('.highlight').each(function(e,f){
      $(f).removeClass('highlight');
      });  
      }
    </script>
    <script type="text/javascript">
      var filter = '';
      $(document).ready(function() {
        $('#usercolumn').resizable({
          handles: { 'w' : '#handle2'},
          resize: function(event, ui) {
            if ($.browser.webkit) {
              $('#handle2').offset({ left: ui.helper.offset().left+3 });
            }
          }
        });
      });  
      function relationstoggle() {
        toggle($('.relation' ),'inactive');
      }  
      function subjectnumberstoggle() {
        toggle($('.subjecticon.number tspan'),'inactive');
      }
      function orbittoggle() {
        toggle($('.connect' ),'inactive');
      }  
      function changetspans(tspans,t1,t2) {
        $.each(tspans,function(a,d){
          d.textContent = (d.textContent == t1 ? t2 : t1);
        });
      }
      function toggle(things,cls) {
        $.each(things,function(a,d){
          $(d).toggleClass(cls)
        });
      }
      function s_relationstoggle(nid) {
        relationstoggle();
        subjectnumberstoggle();
        orbittoggle();
        
        var togglers = [];
        var tspans = [];
        var units = [];
        var roles = [];
        $.each($('.relation.' + $(nid).attr('id')),function(a,b){
          $(b).attr('class').match(/(u\d+) (r\d+)/);
          u = RegExp.$1;
          r = RegExp.$2;
          togglers.push(b);
          togglers.push('#' + r + ' .subjecticon');
          togglers.push('#' + u + ' .subjecticon');
          togglers.push('#' + r + ' .role');
          togglers.push('#' + u + ' .unit');
          tspans.push($('#' + r + ' .subjecticon.number tspan.special')[0]);
          tspans.push($('#' + u + ' .subjecticon.number tspan.special')[0]);
          units.push(u);
          roles.push(r);
        });
        togglers = _.uniq(togglers);
        tspans = _.uniq(tspans);
        units = _.uniq(units);
        roles = _.uniq(roles);
        $.each(units,function(a,b){
          $.each(units,function(c,d){
            $('.connect.f'+b+'.t'+d).toggleClass('highlight');
          });
        });
        $.each(roles,function(a,b){
          $.each(roles,function(c,d){
            $('.connect.f'+b+'.t'+d).toggleClass('highlight');
          });
        });
        changetspans(tspans,'1','');
        toggle(togglers,'highlight');
        toggle($(nid).find('.subjecticon'),'highlight');
      }
      function ur_filtertoggle(nid){
        var subjects = [];
        $.each($('.relation.' + $(nid).attr('id')),function(a,b){
          var res = $(b).attr('class').match(/(s\d+ )*(s\d+)/);
              res = res[0].split(' ');
          subjects = _.union(subjects,res);
        });
        subjects = _.uniq(subjects);
        subjects = _.map(subjects, function(d){ return '#' + d; });
        $.each($('.subject'),function(a,d){
          $(d).removeClass('hidden');
        });
        $.each($('.activefilter'),function(a,d){
          $(d).removeClass('activefilter');
        });
        if (filter == $(nid).attr('id')) {
          filter = '';
        } else {  
          filter = $(nid).attr('id');
          $('#' + filter + '_text').addClass('activefilter');
          var allsubjects = _.map($('.subject'), function(d){ return '#' + $(d).attr('id'); });
          $.each(_.difference(allsubjects,subjects),function(a,d){
            $(d).addClass('hidden');
          });
        }  
      }
      function ur_relationstoggle(nid){
        relationstoggle();
        subjectnumberstoggle();
        orbittoggle();
        var subjects = [];
        $.each($('.relation.' + $(nid).attr('id')),function(a,b){
          $(b).toggleClass($(nid).attr('class'));
          var res = $(b).attr('class').match(/(s\d+ )*(s\d+)/);
              res = res[0].split(' ');
          var len = res.length;
          subjects = _.union(subjects,res);
          if ($(nid).hasClass('role')) {
            var target = $(b).attr('class').match(/(u\d+)/)[1];
          } else {  
            var target = $(b).attr('class').match(/(r\d+)/)[1];
          }
          changetspans($('#' + target + ' .subjecticon.number tspan.special'),len,'');
        });
        subjects = _.uniq(subjects);
        subjects = _.map(subjects, function(d){ return '#' + d; });
        toggle(subjects,$(nid).hasClass('role') ? 'highlightrole': 'highlightunit');
        changetspans($('#' + $(nid).attr('id') + ' .subjecticon.number tspan.special'),$('#' + $(nid).attr('id') + ' .subjecticon.number tspan.normal')[0].textContent,'');
        $.each($('.connect.f' + $(nid).attr('id')),function(a,b){
          toggle($(b),'highlight');
        });
      }
    </script>
  </head>
  <body>
<div class="tabbed rest"><table class="tabbar"><tbody><tr><td class="tabbefore"></td>
<td class="tab" id="tabgraph"><h1>NodeLink</h1></td>
<td class="tabbehind"></td></tr></tbody></table>
<div class="tabbelow"><?xml version="1.0"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:s="http://www.w3.org/2000/svg" xmlns:dyn="http://exslt.org/dynamic" class="active" width="456pt" height="49pt" viewBox="0.00 0.00 456.00 49.00">
  <g id="graph1" graph="" transform="scale(1 1) rotate(0) translate(4 45)">
    <g class="entity unit" onmouseover="over_entity(this)" onmouseout="out_entity(this)" id="entity_unit_A">
      <title>A</title>
      <polygon fill="#729fcf" stroke="black" points="448,-18 394,-18 394,-5.32907e-15 448,-0 448,-18"/>
      <text text-anchor="middle" x="421" y="-6.8" font-family="sans-serif" font-size="8.00">A</text>
    </g>
    <g id="edge_unit_A--C">
      <title>A - C</title>
      <ellipse fill="#ffffff" stroke="black" cx="383" cy="-18" rx="2.88" ry="2.88"/>
    </g>
    <g class="entity unit" onmouseover="over_entity(this)" onmouseout="out_entity(this)" id="entity_unit_B">
      <title>B</title>
      <polygon fill="#729fcf" stroke="black" points="296,-30 242,-30 242,-12 296,-12 296,-30"/>
      <text text-anchor="middle" x="269" y="-18.8" font-family="sans-serif" font-size="8.00">B</text>
    </g>
    <g id="edge_unit_B--J">
      <title>B - J</title>
      <ellipse fill="#ffffff" stroke="black" cx="231" cy="-21" rx="2.88" ry="2.88"/>
    </g>
    <g class="entity unit" onmouseover="over_entity(this)" onmouseout="out_entity(this)" id="entity_unit_J">
      <title>J</title>
      <polygon fill="#729fcf" stroke="black" points="220,-30 166,-30 166,-12 220,-12 220,-30"/>
      <text text-anchor="middle" x="193" y="-18.8" font-family="sans-serif" font-size="8.00">J</text>
    </g>
    <g id="edge_unit_J--A">
      <title>J - A</title>
      <ellipse fill="#ffffff" stroke="black" cx="155" cy="-5" rx="2.88" ry="2.88"/>
    </g>
    <g id="edge_unit_J--X">
      <title>J - X</title>
      <ellipse fill="#ffffff" stroke="black" cx="155" cy="-21" rx="2.88" ry="2.88"/>
    </g>
    <g class="entity unit" onmouseover="over_entity(this)" onmouseout="out_entity(this)" id="entity_unit_C">
      <title>C</title>
      <polygon fill="#729fcf" stroke="black" points="372,-30 318,-30 318,-12 372,-12 372,-30"/>
      <text text-anchor="middle" x="345" y="-18.8" font-family="sans-serif" font-size="8.00">C</text>
    </g>
    <g id="edge_unit_C--B">
      <title>C - B</title>
      <ellipse fill="#ffffff" stroke="black" cx="307" cy="-21" rx="2.88" ry="2.88"/>
    </g>
    <g class="entity unit" onmouseover="over_entity(this)" onmouseout="out_entity(this)" id="entity_unit_X">
      <title>X</title>
      <polygon fill="#729fcf" stroke="black" points="144,-30 90,-30 90,-12 144,-12 144,-30"/>
      <text text-anchor="middle" x="117" y="-18.8" font-family="sans-serif" font-size="8.00">X</text>
    </g>
    <g id="edge_unit_X--Y">
      <title>X - Y</title>
      <ellipse fill="#ffffff" stroke="black" cx="79" cy="-21" rx="2.88" ry="2.88"/>
    </g>
    <g class="entity unit" onmouseover="over_entity(this)" onmouseout="out_entity(this)" id="entity_unit_Y">
      <title>Y</title>
      <polygon fill="#729fcf" stroke="black" points="68,-30 14,-30 14,-12 68,-12 68,-30"/>
      <text text-anchor="middle" x="41" y="-18.8" font-family="sans-serif" font-size="8.00">Y</text>
    </g>
    <g id="edge_unit_Y--B">
      <title>Y - B</title>
      <ellipse fill="#ffffff" stroke="black" cx="3" cy="-31" rx="2.88" ry="2.88"/>
    </g>
    <g class="edge" id="edge_unit_A--C_a">
      <title>A--A - C</title>
      <path fill="none" stroke="black" d="M393.788,-15.445C390.742,-16.1663 388.045,-16.8051 386.11,-17.2635"/>
      <s:path d="" fill="" stroke=""/>
      <s:path d="" fill="" stroke=""/>
    </g>
    <g class="edge" id="edge_unit_B--J_a">
      <title>B--B - J</title>
      <path fill="none" stroke="black" d="M241.788,-21C238.742,-21 236.045,-21 234.11,-21"/>
      <s:path d="" fill="" stroke=""/>
      <s:path d="" fill="" stroke=""/>
    </g>
    <g class="edge" id="edge_unit_J--A_a">
      <title>J--J - A</title>
      <path fill="none" stroke="black" d="M171.336,-11.8783C166.002,-9.63258 160.955,-7.50718 157.919,-6.22893"/>
      <s:path d="" fill="" stroke=""/>
      <s:path d="" fill="" stroke=""/>
    </g>
    <g class="edge" id="edge_unit_J--X_a">
      <title>J--J - X</title>
      <path fill="none" stroke="black" d="M165.788,-21C162.742,-21 160.045,-21 158.11,-21"/>
      <s:path d="" fill="" stroke=""/>
      <s:path d="" fill="" stroke=""/>
    </g>
    <g class="edge" id="edge_unit_C--B_a">
      <title>C--C - B</title>
      <path fill="none" stroke="black" d="M317.788,-21C314.742,-21 312.045,-21 310.11,-21"/>
      <s:path d="" fill="" stroke=""/>
      <s:path d="" fill="" stroke=""/>
    </g>
    <g class="edge" id="edge_unit_X--Y_a">
      <title>X--X - Y</title>
      <path fill="none" stroke="black" d="M89.7876,-21C86.7421,-21 84.0452,-21 82.1097,-21"/>
      <s:path d="" fill="" stroke=""/>
      <s:path d="" fill="" stroke=""/>
    </g>
    <g class="edge" id="edge_unit_Y--B_a">
      <title>Y--Y - B</title>
      <path fill="none" stroke="black" d="M13.7876,-28.1611C10.7421,-28.9626 8.04524,-29.6723 6.1097,-30.1817"/>
      <s:path d="" fill="" stroke=""/>
      <s:path d="" fill="" stroke=""/>
    </g>
    <g class="edge" id="edge_unit_A--C_b">
      <title>A - C--C</title>
      <path fill="none" stroke="black" d="M380.018,-18.2354C378.059,-18.3901 375.281,-18.6094 372.136,-18.8577"/>
      <s:path d="" fill="" stroke=""/>
      <s:path d="" fill="" stroke=""/>
    </g>
    <g class="edge" id="edge_unit_B--J_b">
      <title>B - J--J</title>
      <path fill="none" stroke="black" d="M228.018,-21C226.059,-21 223.281,-21 220.136,-21"/>
      <s:path d="" fill="" stroke=""/>
      <s:path d="" fill="" stroke=""/>
    </g>
    <g class="edge" id="edge_unit_J--A_b">
      <title>J - A--A</title>
      <path fill="none" stroke="black" d="M157.896,-4.73755C167.976,-3.84766 202.461,-1 231,-1 345,-1 345,-1 345,-1 361.319,-1 379.501,-2.8468 393.989,-4.76574"/>
      <s:path d="" fill="" stroke=""/>
      <s:path d="" fill="" stroke=""/>
    </g>
    <g class="edge" id="edge_unit_J--X_b">
      <title>J - X--X</title>
      <path fill="none" stroke="black" d="M152.018,-21C150.059,-21 147.281,-21 144.136,-21"/>
      <s:path d="" fill="" stroke=""/>
      <s:path d="" fill="" stroke=""/>
    </g>
    <g class="edge" id="edge_unit_C--B_b">
      <title>C - B--B</title>
      <path fill="none" stroke="black" d="M304.018,-21C302.059,-21 299.281,-21 296.136,-21"/>
      <s:path d="" fill="" stroke=""/>
      <s:path d="" fill="" stroke=""/>
    </g>
    <g class="edge" id="edge_unit_X--Y_b">
      <title>X - Y--Y</title>
      <path fill="none" stroke="black" d="M76.0182,-21C74.0586,-21 71.2807,-21 68.1362,-21"/>
      <s:path d="" fill="" stroke=""/>
      <s:path d="" fill="" stroke=""/>
    </g>
    <g class="edge" id="edge_unit_Y--B_b">
      <title>Y - B--B</title>
      <path fill="none" stroke="black" d="M5.88118,-31.6561C15.9115,-33.8809 50.2543,-41 79,-41 193,-41 193,-41 193,-41 211.555,-41 231.845,-35.3555 246.789,-30.0637"/>
      <s:path d="" fill="" stroke=""/>
      <s:path d="" fill="" stroke=""/>
    </g>
  </g>
</svg></div></div>
  </body>
</html>
